{
  "name": "WF09_VOICE_TTS_AND_UPLOAD",
  "nodes": [
    {
      "id": "Start",
      "name": "Start",
      "type": "n8n-nodes-base.manualTrigger",
      "typeVersion": 1,
      "position": [
        240,
        300
      ],
      "parameters": {}
    },
    {
      "id": "TTS",
      "name": "Run WF02 ElevenLabs Voice",
      "type": "n8n-nodes-base.executeWorkflow",
      "typeVersion": 1,
      "position": [
        460,
        300
      ],
      "parameters": {
        "workflowId": "={{$env.WF_VOICE_ID || ''}}",
        "options": {
          "waitForCompletion": true
        }
      }
    },
    {
      "id": "Prep",
      "name": "Prep upload",
      "type": "n8n-nodes-base.function",
      "typeVersion": 2,
      "position": [
        700,
        300
      ],
      "parameters": {
        "functionCode": "const j=items[0].json; return [{json:{...j, local_path:`${j._output_dir}/voice.mp3`, object_key:`${j.product_id}/${j.job_id}/voice.mp3`}}];"
      }
    },
    {
      "id": "Upload",
      "name": "Run WF08 Upload",
      "type": "n8n-nodes-base.executeWorkflow",
      "typeVersion": 1,
      "position": [
        920,
        300
      ],
      "parameters": {
        "workflowId": "={{$env.WF_UPLOAD_ID || ''}}",
        "options": {
          "waitForCompletion": true
        }
      }
    },
    {
      "id": "Return",
      "name": "Set audio_url",
      "type": "n8n-nodes-base.function",
      "typeVersion": 2,
      "position": [
        1140,
        300
      ],
      "parameters": {
        "functionCode": "const j=items[0].json; j.audio_url=j.public_url; return [{json:j}];"
      }
    }
  ],
  "connections": {
    "Start": {
      "main": [
        [
          {
            "node": "Run WF02 ElevenLabs Voice",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Run WF02 ElevenLabs Voice": {
      "main": [
        [
          {
            "node": "Prep upload",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Prep upload": {
      "main": [
        [
          {
            "node": "Run WF08 Upload",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Run WF08 Upload": {
      "main": [
        [
          {
            "node": "Set audio_url",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "timezone": "Australia/Melbourne"
  },
  "meta": {
    "purpose": "ElevenLabs \u2192 voice.mp3 \u2192 MinIO upload \u2192 audio_url.",
    "generated_at": "2026-01-07"
  }
}